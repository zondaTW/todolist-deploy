version: '3'

services:
    nginx:
        image: nginx
        ports:
            - 80:80
        volumes:
            - ./frontend/dist:/usr/share/nginx/html/
            - ./nginx.conf:/etc/nginx/nginx.conf
    backend:
        build:
            context: ./backend
            dockerfile: ./Dockerfile
        volumes:
            - ./env.ini:/go/app/env.ini
    db:
        image: postgres:latest
        environment:
            POSTGRES_USER: postgres
            POSTGRES_PASSWORD: password
        volumes:
            - postgresql:/var/lib/postgresql
            - postgresql_data:/var/lib/postgresql/data

volumes:
    postgresql:
    postgresql_data: